<!doctype html>
<html lang="en">
<head>

<!-- Basic Page Needs
================================================== -->
<title>Yeneta - Update profile</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- CSS
================================================== -->
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/colors/blue.css">

</head>
<body>

<!-- Wrapper -->
<div id="wrapper">

<!-- Header Container
================================================== -->
<header id="header-container" class="fullwidth">

	<!-- Header -->
	<div id="header">
		<div class="container">
			
			<!-- Left Side Content -->
			<div class="left-side">
				
				<!-- Logo -->
				<div id="logo">
					<a href="index.html"><img src="images/logo.jpg" style="width: 70px; height: 70px; object-fit: contain;" alt=""></a>
				</div>

				<!-- Main Navigation -->
				<nav id="navigation">
					<ul id="responsive">
						<!-- <li><a href="tutors.html">Find Tutor</a>
							
						</li> -->

						<li><a href="tutees.html">Find Tutee</a>
							
						</li>
						<li><a href="post-form.html">Post a work</a></li>
						<li><a href="messages.html">Messages</a></li>
						

						<li><a href="contact.html#">Contact</a>
						</li>

					</ul>
				</nav>
				<div class="clearfix"></div>
				<!-- Main Navigation / End -->
				
			</div>
			<!-- Left Side Content / End -->


			<!-- Right Side Content / End -->
			<div class="right-side" id="signedout">
				<div class="header-widget">
					<a href="login.html" class="log-in-button"><i class="icon-feather-log-in"></i> <span>Log In / Register</span></a>
				</div>

				<!-- Mobile Navigation Button -->
				<span class="mmenu-trigger">
					<button class="hamburger hamburger--collapse" type="button">
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</button>
				</span>


			</div>

			<div class="right-side" style="display: none;" id="loggedin">

				<!--  User Notifications -->
				<div class="header-widget hide-on-mobile">
					
					<!-- Notifications -->
					<div class="header-notifications">

						<!-- Trigger -->
						<div class="header-notifications-trigger">
							<a href="index.html#"><i class="icon-feather-bell"></i><span></span></a>
						</div>

						<!-- Dropdown -->
						<div class="header-notifications-dropdown">

							<div class="header-notifications-headline">
								<h4>Notifications</h4>
								<button class="mark-as-read ripple-effect-dark" title="Mark all as read" data-tippy-placement="left">
									<i class="icon-feather-check-square"></i>
								</button>
							</div>

							<div class="header-notifications-content">
								<div class="header-notifications-scroll" data-simplebar>
									<ul>
										<!-- Notification -->
									
								</div>
							</div>

						</div>

					</div>
					
					<!-- Messages -->
					<div class="header-notifications">
						<div class="header-notifications-trigger">
							<a href="index.html#"><i class="icon-feather-mail"></i><span></span></a>
						</div>

						<!-- Dropdown -->
						<div class="header-notifications-dropdown">

							<div class="header-notifications-headline">
								<h4>Messages</h4>
								<button class="mark-as-read ripple-effect-dark" title="Mark all as read" data-tippy-placement="left">
									<i class="icon-feather-check-square"></i>
								</button>
							</div>

							<div class="header-notifications-content">
								<div class="header-notifications-scroll" data-simplebar>
									<ul>
										<!-- Notification -->
										
									</ul>
								</div>
							</div>

							<a href="messages.html" class="header-notifications-button ripple-effect button-sliding-icon">View All Messages<i class="icon-material-outline-arrow-right-alt"></i></a>
						</div>
					</div>

				</div>
				<!--  User Notifications / End -->

				<!-- User Menu -->
				<div class="header-widget">

					<!-- Messages -->
					<div class="header-notifications user-menu">
						<div class="header-notifications-trigger">
							<a href="index.html#"><div class="user-avatar status-online"><img src="images/user-avatar-small-01.jpg" alt=""></div></a>
						</div>

						<!-- Dropdown -->
						<div class="header-notifications-dropdown">

							<!-- User Status -->
							<div class="user-status">

								<!-- User Name / Avatar -->
								<div class="user-details">
									<div class="user-avatar status-online"><img src="images/user-avatar-small-01.jpg" alt=""></div>
									<div class="user-name">
										 <span>Student</span>
									</div>
								</div>
								
						</div>
						
						<ul class="user-menu-small-nav">
							<li><a href="#" id="logout"><i class="icon-material-outline-power-settings-new"></i> Logout</a></li>
							<li><a href="update-profile.html" id="logout"><i class="icon-feather-user"></i> Update profile</a></li>
						</ul>

						</div>
					</div>

				</div>
				<!-- User Menu / End -->

				<!-- Mobile Navigation Button -->
				<span class="mmenu-trigger">
					<button class="hamburger hamburger--collapse" type="button">
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</button>
				</span>

			</div>
			<!-- Right Side Content / End -->

		</div>
	</div>
	<!-- Header / End -->

</header>
<div class="clearfix"></div>
<!-- Header Container / End -->



<!-- Intro Banner
================================================== -->
<!-- add class "disable-gradient" to enable consistent background overlay -->
<div class="sign-in-form" style="width: 100%; display: flex; justify-content: center;">

	<div class="popup-tabs-container" style="width: 50%;">

		<!-- Register -->
		<div class="popup-tab-content" id="register">
			
			<!-- Welcome Text -->
			<div class="welcome-text">
				<h3>Update Profile</h3>
			</div>

			<!-- Account Type -->
			<div class="account-type">

				<div>
					<input type="radio" name="account-type-radio" value="tutor" id="employer-radio" class="account-type-radio" checked/>
					<label for="employer-radio" class="ripple-effect-dark"><i class="icon-material-outline-business-center"></i> Student</label>
				</div>
			</div>
				
			<!-- Form -->
			<form method="post" id="register-account-form">
				<div class="input-with-icon-left">
					<i class="icon-feather-user"></i>
					<input type="text" class="input-text with-border" name="fn" id="" placeholder="First name" required/>
				</div>

				<div class="input-with-icon-left">
					<i class="icon-feather-user"></i>
					<input type="text" class="input-text with-border" name="mn" id="" placeholder="Middle name" required/>
				</div>
                
                <div class="input-with-icon-left">
					<i class="icon-feather-user"></i>
					<input type="text" class="input-text with-border" name="ln" id="" placeholder="Last name" required/>
				</div>

				<div class="input-with-icon-left">
					<i class="icon-feather-calendar"></i>
					<input type="date" class="input-text with-border" name="dob" id="" placeholder="Date of birth" required/>
				</div>

				<div class="input-with-icon-left">
					<i class="icon-feather-phone"></i>
					<input type="number" class="input-text with-border" name="ph" id="" placeholder="Phone no." required/>
				</div>

                <div class="input-with-icon-left">
					<i class="icon-material-baseline-mail-outline"></i>
					<input type="text" class="input-text with-border" name="em" id="" placeholder="Email Address" required/>
				</div>

                <div class="input-with-icon-left" style="margin-bottom: 15px;">
                        <span>Education level:</span>
                        <select class="selectpicker hide-tick" name="el">
                            <option value="1">Highscool</option>
                            <option value="2">Undergraduate</option>
                            <option value="3">Masters</option>
                            <option value="4">PHD</option>
                        </select>
				</div>

				<div class="input-with-icon-left">
					<textarea rows="5" cols="7" type="number" class="input-text with-border" name="ds" id="" placeholder="Description" required></textarea>
				</div>


			
				<div class="notification error closeable" id="err-msg" style="display: none;">
					<p>Something went wrong!</p>
					<a class="close" href="#"></a>
				</div>
                <button class="margin-top-10 button full-width button-sliding-icon ripple-effect" type="submit" id="l-btn">Update <i class="icon-material-outline-arrow-right-alt"></i></button>
			</form>
			
			<!-- Button -->
			
			
			<!-- Social Login -->
			<!-- <div class="social-login-separator"><span>or</span></div>
			<div class="social-login-buttons">
				<button class="facebook-login ripple-effect"><i class="icon-brand-facebook-f"></i> Register via Facebook</button>
				<button class="google-login ripple-effect"><i class="icon-brand-google-plus-g"></i> Register via Google+</button>
			</div> -->

		</div>

	</div>
</div>
<!-- Sign In Popup / End -->


<!-- Scripts
================================================== -->
<script src="js/jquery-3.4.1.min.js"></script>
<script src="https://www.vasterad.com/themes/hireo_21/js/jquery-migrate-3.1.0.min.js"></script>
<script src="js/mmenu.min.js"></script>
<script src="js/tippy.all.min.js"></script>
<script src="js/simplebar.min.js"></script>
<script src="js/bootstrap-slider.min.js"></script>
<script src="js/bootstrap-select.min.js"></script>
<script src="js/snackbar.js"></script>
<script src="js/clipboard.min.js"></script>
<script src="js/counterup.min.js"></script>
<script src="js/magnific-popup.min.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/custom.js"></script>
<script src="js/student.js"></script>

<!-- Snackbar // documentation: https://www.polonel.com/snackbar/ -->
<script>
// Snackbar for user status switcher
$('#snackbar-user-status label').click(function() { 
	Snackbar.show({
		text: 'Your status has been changed!',
		pos: 'bottom-center',
		showAction: false,
		actionText: "Dismiss",
		duration: 3000,
		textColor: '#fff',
		backgroundColor: '#383838'
	}); 
}); 

window.addEventListener('DOMContentLoaded', function(){
	let target = document.getElementById('register-account-form');
	let data = JSON.parse(localStorage.getItem('yeneta_student'))
	console.log(data)
	target.fn.value = data.Student_First_Name
	target.mn.value = data.Student_Middle_Name || ''
	target.ln.value = data.Student_Last_Name
	target.ph.value = data.Phone
	target.dob.value = data.Date_Of_Birth
	target.em.value = data.Email
	target.el.value = data.Educational_Level
	target.ds.value = data.	Description
})

$('#register-account-form').submit(function(e){
    e.preventDefault();
    //window.location.href = 'login.html'
	let target = e.target
	let data = {
		Student_First_Name: target.fn.value,
		Student_Middle_Name: target.mn.value,
		Student_Last_Name: target.ln.value,
		Phone: target.ph.value,
		Date_Of_Birth: target.dob.value,
		Email: target.em.value,
		Grade_level: target.el.value,
		Description: target.ds.value,	
	}

	let loader = `
		<div class="typing-indicator">
			<span></span>
			<span></span>
			<span></span>
		</div>
	`, btn = document.getElementById('l-btn');

		btn.innerHTML = loader
		btn.disabled = true
		btn.style.cursor = 'not-allowed'
		btn.style.display = 'flex'
		btn.style.justifyContent = 'center'	

	fetch(window.constants.baseUrl + '/Yeneta/students/update/'+ JSON.parse(localStorage.getItem('yeneta_student'))._id, {
		method: 'post',
		body: JSON.stringify(data),
		headers: {
			'Content-Type': 'application/json'
		}
	}).then(r => r.json())
	.then(d => {
		console.log(d)
		if(d.status == 'Sucess'){
			localStorage.setItem('yeneta_student', JSON.stringify(d.data.student))
			window.location.reload()
		} else {
			btn.disabled = false
			btn.style.display = 'block'
			btn.style.cursor = 'pointer'
			btn.innerHTML = 'Update <i class="icon-material-outline-arrow-right-alt"></i>'
			document.getElementById('err-msg').style.display = 'block'
		}
	}).catch(e => console.log(e));
})
</script>


<!-- Google Autocomplete -->
<script>
	function initAutocomplete() {
		 var options = {
		  types: ['(cities)'],
		  // componentRestrictions: {country: "us"}
		 };

		 var input = document.getElementById('autocomplete-input');
		 var autocomplete = new google.maps.places.Autocomplete(input, options);
	}

	// Autocomplete adjustment for homepage
	if ($('.intro-banner-search-form')[0]) {
	    setTimeout(function(){ 
	        $(".pac-container").prependTo(".intro-search-field.with-autocomplete");
	    }, 300);
	}

    $('.account-type-radio').each(function(ind, el){
        el.onclick = function(e){
            let target = e.target.value,
            file = document.getElementById('cv')
            if(target == 'tutor'){
                file.style.display = 'block'
            } else {
                file.style.display = 'none'
            }
        }
    })

</script>

<!-- Google API & Maps -->
<!-- Geting an API Key: https://developers.google.com/maps/documentation/javascript/get-api-key -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAaoOT9ioUE4SA8h-anaFyU4K63a7H-7bc&libraries=places"></script>

</body>
</html>